{
  "apiRequestReadCommentTemplate": {
    "application/json": {
      "operation": "read",
      "payload": {
        "TableName": "comments",
        "IndexName": "job_id-index",
        "KeyConditionExpression": "job_id = :job_id",
        "ExpressionAttributeValues": {
          ":job_id": "$input.params().header.get('x-Job-Id')"
        }
      }
    }
  },
  "apiRequestCreateCommentTemplate": {
    "application/json": {
      "operation": "create",
      "payload": {
        "TableName": "comments",
        "Item": {
          "job_id": "$input.path('$').payload.Item.job_id",
          "content": "$input.path('$').payload.Item.content",
          "source": "$input.path('$').payload.Item.source"
        }
      }
    }
  }
}